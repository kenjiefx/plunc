{
  "version": 3,
  "sources": ["../../../out/entities/plunc.js", "../../../out/utils/pluncAttribute.js", "../../../out/renders/repeat.js", "../../../out/utils/elementSelector.js", "../../../out/test/compatability/browser/index.js"],
  "sourcesContent": ["export function createPluncApp(name, id, configuration, registry, library) {\n    let ready = false;\n    // local state stored in closure\n    const config = configuration;\n    function getConfig() {\n        return config;\n    }\n    function getLibrary() {\n        return library;\n    }\n    function getRegistry() {\n        return registry;\n    }\n    function getName() {\n        return name;\n    }\n    function getId() {\n        return id;\n    }\n    function nowReady() {\n        ready = true;\n    }\n    function isReady() {\n        return ready;\n    }\n    return {\n        getConfig,\n        getLibrary,\n        getRegistry,\n        getName,\n        getId,\n        nowReady,\n        isReady,\n    };\n}\n", "export const APP_ATTR = \"app\";\nexport const TEMPL_NAME_ATTR = \"name\";\nexport const SERVICE_OBJECT = \"service_object\";\nexport const FACTORY_OBJECT = \"factory_object\";\nexport const COMPONENT_OBJECT = \"component_object\";\nexport const COMPONENT_ELEMENT_ATTR = \"component\";\nexport const REPEAT_ELEMENT_ATTR = \"repeat\";\nexport const IF_ELEMENT_ATTR = \"if\";\nexport const HIDE_ELEMENT_ATTR = \"hide\";\nexport const SHOW_ELEMENT_ATTR = \"show\";\nexport const CHECK_ELEMENT_ATTR = \"check\";\nexport const STYLE_ELEMENT_ATTR = \"style\";\nexport const MODEL_ELEMENT_ATTR = \"model\";\nexport const DISABLE_ELEMENT_ATTR = \"disable\";\nexport const CLICK_EVENT_ATTR = \"click\";\nexport const CHANGE_EVENT_ATTR = \"change\";\nexport const TOUCH_EVENT_ATTR = \"touch\";\nexport const BLOCK_ELEMENT_ATTR = \"block\";\nexport const SCOPE_ARGUMENT_KEY = \"$scope\";\nexport const BLOCK_ARGUMENT_KEY = \"$block\";\nexport const PARENT_ARGUMENT_KEY = \"$parent\";\nexport const CHILDREN_ARGUMENT_KEY = \"$children\";\nexport const PATCH_ARGUMENT_KEY = \"$patch\";\nexport const APP_ARGUMENT_KEY = \"$app\";\nexport const COMPONENT_ARGUMENT_KEY = \"$this\";\nexport const STRAWBERRY_ID_ATTR = \"id\";\nexport const REPEAT_REFERENCE_TOKEN = \"$$index\";\nexport const LOCK_ID_ATTR_KEY = \"set\";\nexport const LOCK_ID_ATTR_VALUE = \"true\";\nexport const EVENT_ELEMENT_ATTR = \"event\";\nexport const ELEMENT_REFERENCE_ATTR = \"rid\";\nexport function usePluncAttribute(instance) {\n  function __testMangle(instance) {\n    return instance.getConfig().prefix;\n  }\n  function create(key) {\n    const prefix = __testMangle(instance);\n    return `${prefix}${key}`;\n  }\n  function createWithValue(key, value) {\n    const prefix = __testMangle(instance);\n    return `${prefix}${key}=\"${value}\"`;\n  }\n  return {\n    create,\n    createWithValue,\n  };\n}\n", "import { REPEAT_ELEMENT_ATTR, REPEAT_REFERENCE_TOKEN, } from \"../utils/pluncAttribute\";\n/**\n * Dissects repeat expression into two parts, refObjName and aliasObjName.\n * For example, `users as user` will be dissected\n * into `['users', 'user']`. Similarly, `item until 3`\n * will be dissected into `['item', 3]`\n * @param expression\n * @returns\n */\nfunction dissectRepeatExpression(expression) {\n    if (expression.includes(\"until \")) {\n        return [REPEAT_REFERENCE_TOKEN, expression.split(\"until\")[1].trim()];\n    }\n    return [\n        expression.split(\" as \")[0].trim(),\n        expression.split(\" as \")[1].trim(),\n    ];\n}\n/**\n * Calculates number of repetitions based on the type of\n * repeatable value.\n * @param repetitions\n * @returns\n */\nfunction calculateNumberOfRepetitions(repetitions) {\n    if (repetitions instanceof Array)\n        return repetitions.length;\n    if (typeof repetitions === \"number\" && Number.isInteger(repetitions))\n        return repetitions;\n    throw new Error(`repeatable elements must have repeatable values`);\n}\n/**\n * This function simply checks if a value is iterable\n * with `Object.entries`.\n * @param value\n */\nfunction isIterableWithObjectEntries(value) {\n    return value !== null && (typeof value === \"object\" || Array.isArray(value));\n}\nexport function renderRepeats(componentTemplate, pluncApp, attributeManager, elementSelector) {\n    const repeatAttr = attributeManager.create(REPEAT_ELEMENT_ATTR);\n    const firstLevelRepeatElements = elementSelector.getFirstChildrenWithAttribute(componentTemplate, repeatAttr);\n    console.log(firstLevelRepeatElements);\n}\n", "export function useElementSelector() {\n    /**\n     * Selects an element within the given context using the provided CSS selector.\n     * @param context - Document or HTMLElement to search within\n     * @param selector - CSS selector string to match the element\n     * @returns The first matching HTMLElement or null if no match is found\n     */\n    function select(context, selector) {\n        return context.querySelector(selector);\n    }\n    function selectAll(context, selector) {\n        return Array.from(context.querySelectorAll(selector));\n    }\n    function selectClosest(element, selector) {\n        return element.closest(selector);\n    }\n    /**\n     * Gets the first-level children of a parent element that have a specific attribute.\n     * @param parent - The parent HTMLElement, Document, ShadowRoot, or DocumentFragment to search within\n     * @param attribute - The attribute name to look for in child elements\n     * @returns\n     */\n    function getFirstChildrenWithAttribute(parent, attribute) {\n        const selectedChildren = parent.querySelectorAll(`[${attribute}]`);\n        const results = [];\n        selectedChildren.forEach((element) => {\n            if (element.parentElement === null) {\n                results.push(element);\n                return;\n            }\n            const closestAncestorWithAttribute = element.parentElement.closest(`[${attribute}]`);\n            if (closestAncestorWithAttribute === null) {\n                results.push(element);\n            }\n        });\n        return results;\n    }\n    return {\n        select,\n        selectAll,\n        selectClosest,\n        getFirstChildrenWithAttribute,\n    };\n}\n", "import { createPluncApp } from \"../../../entities/plunc\";\nimport { renderRepeats } from \"../../../renders/repeat\";\nimport { useElementSelector } from \"../../../utils/elementSelector\";\nimport { usePluncAttribute } from \"../../../utils/pluncAttribute\";\nfunction run() {\n    console.log(\"Browser compatibility tests running...\");\n    const testId = \"repeat\";\n    const template = document.querySelector(`template[test-id=\"${testId}\"]`);\n    if (!template) {\n        console.error(`Template with test-id=\"${testId}\" not found.`);\n        return;\n    }\n    const clone = template.content.cloneNode(true);\n    const registry = {}; // Mock registry\n    const library = {}; // Mock library\n    const pluncApp = createPluncApp(\"TestApp\", 1, {\n        prefix: \"plunc-\",\n        startFn: async () => {\n            return true;\n        },\n        endFn: async () => {\n            /* no-op */\n        },\n    }, \n    // @ts-ignore\n    registry, library);\n    const attrManager = usePluncAttribute(pluncApp);\n    renderRepeats(clone, pluncApp, attrManager, useElementSelector());\n}\nrun();\n"],
  "mappings": "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",
  "names": ["instance"]
}
